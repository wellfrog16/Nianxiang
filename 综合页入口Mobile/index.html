<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta id="viewport" name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
    <meta name="keywords" content="佳能, 喷墨打印机">
    <meta name="WT.cg_abc" content="PI">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no,email=no">
    <meta HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
    <meta HTTP-EQUIV="Expires" CONTENT="0"> 
    <link href="style/swiper-3.3.1.min.css" rel="stylesheet" />
    <link href="style/main.min.css" rel="stylesheet" />
    <!--<script data-main="js/main.js" src="js/require.js"></script>-->
    <script type="text/javascript" src="/m/analytics/js/analytics.js"></script>

    <title>佳能</title>

</head>
<body>
    <div class="block">
        请使用竖屏访问本页面
    </div>

    <!-- 佳能头部 -->
    <div class="header">
        <div class="logo">
            <a href="/"><img src="img/canon/logo.png" alt="佳能（中国）"></a>
        </div>
        <div class="sub-logo"><img src="img/canon/sub_logo.png" alt="感动常在佳能" /></div>
    </div>

    <!-- banner轮播 -->
    <div class="carousel">
        <div id="carousel-banner" class="swiper-container">
            <div class="swiper-wrapper carousel-imgs">
                <div class="swiper-slide"><img src="img/banner/banner1.jpg" alt="家用打印机" /></div>
                <div class="swiper-slide"><img src="img/banner/banner2.jpg" alt="商务打印机" /></div>
                <div class="swiper-slide"><img src="img/banner/banner3.jpg" alt="专业打印机" /></div>
                <div class="swiper-slide"><img src="img/banner/banner4.jpg" alt="用户案例" /></div>
            </div>

            <!-- 如果需要导航按钮 -->
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>

            <div class="choice"></div>

        </div>

        <div id="carousel-tips" class="swiper-container carousel-tips">
            <div class="swiper-wrapper">
                <div class="swiper-slide"><div class="tips tips01H" data-class="tips01">
                    <div class="tip-box"><div><a href="http://m.canon.com.cn/m/products/printer/pixma/ts8080/index.html"><img src="img/nav/a1.jpg" alt="家用打印机" /></a></div></div>
                    <div class="arrow"></div>
                    <span>家用打印机</span>
                </div></div>
                <div class="swiper-slide"><div class="tips tips02" data-class="tips02">
                    <div class="tip-box"><div><a href="http://m.canon.com.cn/products/printer/pixma/eseries/index.html"><img src="img/nav/b1.jpg" alt="经济打印" /></a><a href="http://m.canon.com.cn/products/printer/businessijp/index.html"><img src="img/nav/b2.jpg" alt="商务打印机" /></a></div></div>
                    <div class="arrow"></div>
                    <span>商务打印机</span>
                </div></div>
                <div class="swiper-slide"><div class="tips tips03" data-class="tips03">
                    <div class="tip-box"><div><a href="http://www.canon.com.cn/profamily/"><img src="img/nav/c1.jpg" alt="专业打印机" /></a></div></div>
                    <div class="arrow"></div>
                    <span>专业打印机</span>
                </div></div>
                <div class="swiper-slide"><div class="tips tips04" data-class="tips04">
                    <div class="tip-box"><div><a href="http://m.canon.com.cn/m/products/printer/userguide/index.html"><img src="img/nav/d1.jpg" alt="用户案例" /></a></div></div>
                    <div class="arrow"></div>
                    <span>用户案例</span>
                </div></div>
            </div>
        </div>
    </div>


    <div class="nav">

        <div class="function nav-link">
            <ul>
                <li><a href="http://m.canon.com.cn/m/products/printer/wifi/ij/index.html"><img src="img/link/a1.jpg" alt="移动无线" /></a></li>
                <li class="center"><a href="http://www.canon.com/c-park/"><img src="img/link/a3.jpg" alt="Creative-park" /></a></li>
                <li><a href="http://m.canon.com.cn/products/printer/pixma/mig/index.html"><img src="img/link/a2.jpg" alt="“印”像花园" /></a></li>
            </ul>
            <div class="nav-mask"><span>丰富功能</span></div>
        </div>

        <div class="service nav-link">
            <ul>
                <li><a href="http://m.canon.com.cn/support/servicemenu/pextension.html"><img src="img/link/b3.jpg" alt="延长服务" /></a></li>
                <li class="center"><a href="https://canon.tmall.com/p/rd253298.htm"><img src="img/link/b1.jpg" alt="“焕”新计划" /></a></li>
                <li><a href="http://m.canon.com.cn/m/support/pregister/login/index"><img src="img/link/b2.jpg" alt="佳能e服务" /></a></li>
            </ul>
            <div class="nav-mask"><span>售后服务</span></div>
        </div>

        <div>
            <div class="dealer nav-link">
                <ul>
                    <li><a href="http://m.canon.com.cn/m/buy/sale/index.html"><img src="img/link/c1.jpg" alt="经销商查询" /></a></li>
                    <li class="center"><a href="https://canon.m.tmall.com/"><img src="img/link/c2.jpg" alt="天猫商城" /></a></li>
                    <li><a href="https://shop.m.jd.com/?shopId=1000000513"><img src="img/link/c3.jpg" alt="京东商城" /></a></li>
                </ul>
                <div class="nav-mask"><span>购买查询</span></div>
            </div>


            <div class="consumable nav-link">
                <ul>
                    <li><a href="http://www.canon.com.cn/products/printer/pixma/consumable/index.html"><img src="img/link/d1.jpg" alt="贴纸" /></a></li>
                    <li class="bottom"><a href="http://m.canon.com.cn/m/sticker/index.html"><img src="img/link/d2.jpg" alt="精彩人生" /></a></li>
                </ul>
                <div class="nav-mask"><span>原装耗材</span></div>
            </div>
        </div>
    </div>
</body>

</html>

<script type="text/javascript" src="js/libs/jquery-3.1.0.min.js"></script>
<script type="text/javascript" src="js/libs/swiper-3.3.1.jquery.min.js"></script>
<script type="text/javascript">
        var mySwiper2 = new Swiper('#carousel-tips', {
            direction: 'horizontal',
            //loop: true,
            slidesPerView: 2
        })


        var index = 0;

        var mySwiper = new Swiper('#carousel-banner', {
            direction: 'horizontal',
            loop: true,
            autoplay: 3000,
            autoplayDisableOnInteraction: false,

            // 如果需要分页器
            // pagination: '.swiper-pagination',

            // 如果需要前进后退按钮
            nextButton: '.swiper-button-next',
            prevButton: '.swiper-button-prev',

            effect: 'fade',

            // 如果需要滚动条
            // scrollbar: '.swiper-scrollbar',

            onSlideChangeEnd: function (swiper) {
                //console.log(swiper.activeIndex)
                //if (index++ > 0) { mySwiper2.slideNext(); }
                //if (index++ > 0) { tt(swiper.activeIndex); }
                tt(swiper.activeIndex);
            }

            //onSliderMove: function (swiper) {
            //    $('.tip-box').animate({ marginTop: "0px", height: "0px" });
            //}

            //onSlideNextEnd: function () {
            //    mySwiper2.slideNext();
            //},

            //onSlidePrevStart: function () {
            //    mySwiper2.slidePrev();
            //}
        })

        function tt(y) {

            //console.log('111 ==' + y);

            var z = y - 1;
            if (z == 4) { z = 0; }
            if (z == -1) { z = 4; }

            mySwiper2.slideTo(z);
            //console.log(z);

            var arr = $('.tips');
            var x = y++;

            if (x > 4) { x = 1; }

            var className = arr.eq(x - 1).attr("data-class");

            //console.log(x-1);
            //console.log(className);
            arr.eq(0).removeClass("tips01H").addClass("tips01");
            arr.eq(1).removeClass("tips02H").addClass("tips02");
            arr.eq(2).removeClass("tips03H").addClass("tips03");
            arr.eq(3).removeClass("tips04H").addClass("tips04");
            arr.eq(x - 1).removeClass(className).addClass(className + "H");

            //$('.tip-box').animate({ marginTop: "0px", height: "0px" });

            //if (x == 1) { x = 4; }
            //var className2 = arr.eq(x-2).attr("data-class");
            //arr.eq(x-2).removeClass(className2 + "H").addClass(className2);


            //mySwiper2.slideTo(index-1);
        }




        var startY;
        $("#carousel-tips .tips").on("touchstart", function (e) {
            startY = e.originalEvent.changedTouches[0].pageY;
        });

        var tipBox;

        $('#carousel-tips .tips').on('touchend', function (e) {

            var changeY = e.originalEvent.changedTouches[0].pageY - startY;
            changeY = changeY < 0 ? changeY * -1 : changeY;

            if (changeY > 1) { return; }


            var height = $('div>div', $(this)).height();

            var className = $(this).attr("data-class");

            if ($('.tip-box', $(this)).height() == 0) {
                p();

                var arr = $('.tips');
                arr.eq(0).removeClass("tips01H").addClass("tips01");
                arr.eq(1).removeClass("tips02H").addClass("tips02");
                arr.eq(2).removeClass("tips03H").addClass("tips03");
                arr.eq(3).removeClass("tips04H").addClass("tips04");

                $(this).removeClass(className).addClass(className + "H");
                $('.tip-box', $(this)).animate({ marginTop: (height * -1) + "px", height: height + "px" });

                tipBox = $(this);

                console.log(parseInt(className.substring(5, 6)))

                mySwiper.unlockSwipes();
                mySwiper.slideTo(parseInt(className.substring(5, 6)));
                mySwiper.stopAutoplay();
                mySwiper.lockSwipes();

                //setTimeout(function () {

                //    mySwiper.lockSwipes();
                //    console.log("锁定");
                //}, 2000)


            }
            else {
                //$(this).removeClass(className + "H").addClass(className);
                $('.tip-box', $(this)).animate({ marginTop: "0px", height: "0px" });

                mySwiper.startAutoplay();
                mySwiper.unlockSwipes();

                console.log("解锁");
            }
        });

        function p() {
            if (tipBox) {
                var className = tipBox.attr("data-class");
                tipBox.removeClass(className + "H").addClass(className);
                $('.tip-box', tipBox).animate({ marginTop: "0px", height: "0px" });
            }
        }

        var mask;

        $(".nav-link").on("touchstart", function (e) {
            startY = e.originalEvent.changedTouches[0].pageY;
        });

        $(".nav-link").on("touchend", function (e) {
            var changeY = e.originalEvent.changedTouches[0].pageY - startY;
            changeY = changeY < 0 ? changeY * -1 : changeY;

            if (changeY > 1) { return; }

            if (parseInt($('.nav-mask', $(this)).css("left")) < 0) { return false; }

            t();
            var x = $(this).outerWidth() * -1;
            $('.nav-mask', $(this)).animate({ left: x });

            mask = $('.nav-mask', $(this));

            return false;

        });

        function t() {
            if (mask) { mask.animate({ left: 0 }); }
        }


        $("a").on("touchstart", function (e) {
            location.href = $(this).attr('href');
        });
</script>